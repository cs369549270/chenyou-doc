(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{294:function(t,e,a){"use strict";a.r(e);var l=a(28),i=Object(l.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"任务审核通过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务审核通过"}},[t._v("#")]),t._v(" 任务审核通过")]),t._v(" "),a("p",[a("strong",[t._v("需求类型：")])]),t._v(" "),a("ul",[a("li",[t._v("梳理")])]),t._v(" "),a("p",[a("strong",[t._v("流程：")])]),t._v(" "),a("div",{staticClass:"mxgraph",staticStyle:{"max-width":"100%",border:"1px solid transparent"},attrs:{"data-mxgraph":'{"highlight":"#0000ff","nav":true,"resize":true,"toolbar":"zoom layers lightbox","edit":"_blank","xml":"<mxfile host=\\"Electron\\" modified=\\"2020-05-09T02:46:55.054Z\\" agent=\\"5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.0.3 Chrome/80.0.3987.163 Electron/8.2.1 Safari/537.36\\" etag=\\"3uX3Rn61ljh3XJ8HICd4\\" version=\\"13.0.3\\" type=\\"device\\"><diagram id=\\"HoHzOhgLHgAdISxtiKVu\\" name=\\"Page-1\\">5Vldj6IwFP0t+9DHmdCKWB5BcXeT2WQTN5lxXzZVqjABakr9ml+/LRQRUYfddUSziYntoS3tveeee6ug0483nzlZBN+YTyOADH8DOgOAEDSwJb8Uss0RbGhgzkM/h4wSGIVvtJip0WXo01RjOSQYi0S4qIJTliR0KioY4Zytq8NmLPIrwILMaQ0YTUlUR59DXwT6FKhX4l9oOA+KN0PLzp/EpBisT5IGxGfrPajjgU6fMybyVrzp00gZr2qX4Ymnu41xmogmE5a/xsJ+fR6Ne86P9OtP+wHi1YNeJRXb4sDUl+fXXcZFwOYsIZFXoi5ny8SnalVD9soxT4wtJAgl+EqF2GpnkqVgEgpEHOmn+TvVi04epdgXW/IpPbN/pClB+JyKM+PwzuCSqZTFVPCtnMdpRES4qu6DaMrMd+NKq8qGNuwfGFlvckWipX4T8EzguurjdQF2gANVw/GyhgUcA7gYeDbABrAd4GHgDgHu1X0VRTIOlE/WQSjoaEEyY61lKB6z+IpyQTfnbV63kZ6AdNzqOEZm3l2XQQELpgd7AYGNDzJqp25UZJFYHTyZpOorI+gh1gLdpYH59kXPzzpj1XnsFt3BZv/hYKt7FwwTq2GYQNRmnJj35B26CcVLOVL2xsWKsl1OUp0WPYrsNj3afTdIPzWO0icykbVFxXckCueJbE+l+SiXgFK4UCZvRz+IQ9/PaULT8I1MsvWUJxYsTER22q4LuoNzEqkrCz25zOf7XjtN55N6+mA84h7E+VqNvaGX+662X4rxwQQ2m6WSFIfO2+3h7/1pNcpkPdVwLZXJpPzjeo3BAxZPlulV8pZp9N5NXKZ1xcR1JI3frspdULFwQ8Wy2hQsfITgtTJMNmSp5hqK8u4A2N06wSv+ukJxVgiJJnmnYXVmfRTJi+vbfbC85VwOm95i2k3mEP7P2Rwax22/l86RUY1CeF/JvaBhRfwyzbPdTPMgwP0s38v2QGV3qXxKBW0linjYapq3ELqtNA/td6MlQ427vqMWygn3dLNU0RtSzn+tKg5is6CpWYiipp1lVpfIT6BnXT5kUb30uCpZSn6MK/S4yTSL7uPOjE5csoaq6FSiK9t2o2tXLtWuIxerXzquXaJisyrQrZeoqC7QNPHr8dT0N1aSLvI/IGbhRtn1IkazqkaDNqxZDV/mV1fZLf+LyPWp/Een4/0G</diagram></mxfile>"}'}}),t._v(" "),a("script",{attrs:{type:"text/javascript",src:"https://app.diagrams.net/js/viewer.min.js"}}),t._v(" "),a("p",[a("strong",[t._v("请求URL：")])]),t._v(" "),a("ul",[a("li",[t._v("管理后台任务审核接口："),a("code",[t._v("/app-task/user-attend/audit")])]),t._v(" "),a("li",[t._v("移动端任务管理后台审核接口："),a("code",[t._v("/my/seller-app-task/audit")])])]),t._v(" "),a("p",[a("strong",[t._v("请求参数：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("子参数")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("json string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("存在多条记录批量处理的情况")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("id")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("用户参与记录的标识,对应user_attend_task_line表id")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("appid")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("任务标识")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("status")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("任务状态，通过传'03'")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("remark")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("驳回原因，通过传空字符串")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("phone")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("用户手机号")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("uid")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("用户标识")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("taskid")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("appid对应little_app_task_info 的id")])])])]),t._v(" "),a("p",[a("strong",[t._v("流程说明：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("流程")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("操作说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("通过记录")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 根据appid，uid 查询 user_attend_app_line 表中 status = '01' 的记录，修改status 为 '02'，endOn 为 当前时间"),a("br"),t._v("2. 根据appid，uid 查询 user_attend_task_line 表中 status = '02' 的记录，修改status 为 '05'，auditOn 为当前时间"),a("br"),t._v(" 3. 给用户新增金币到账记录：direction 为 大写C ，trade_type 为 2001，coinAmt 为user_attend_task_line表中对应的coin，balance 为 当前用户金币余额 + coinAmt，remark为“完成任务【"),a("code",[t._v("app_task_info.title")]),t._v("】”，reference_id 为 user_attend_task_line表中对应的id "),a("br"),t._v(" 4. 用balance更新sys_user 的 coins_num")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("任务状态")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 查询 app_task_info 表中的 status")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("进行中数量")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 查询user_attend_app_line表中status = '01' 的任务记录数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("修改任务状态 为 7")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 修改 app_task_info 表中的status 为 7")])])])])])}),[],!1,null,null,null);e.default=i.exports}}]);