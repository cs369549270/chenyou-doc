#日期：3/19-3/19
1. 页面：http://www.gszhuan.com/seller-app-task#/newtask?id=546&active=2  
接口：http://www.gszhuan.com/my/seller-app-task/edit
提交编辑的时候，需要判断价格是否有修改，修改的价格的同时，对商家做差价的补扣或返还
补扣时，余额不足通知前端弹窗提示

2. 查一下为什么546 这个appid，发布的时候只扣了 0.6元，驳回的时候却返了20 元

3. 任务超过截止日期自动下架的时候，需要判断是不是商家发布的，是的话，将没放出去的份数退款给商家

4. 用户提现返利，在后台审核通过打款的时候再返利
5. 用户提现扣税，提现表中记录手续费，记录成了金币，需要除以后台的兑换比例
6. http://192.168.2.120:8081/api/pwall/dy-detail?id=1500009375&deviceId=869451030315555 这个接口返回的nextItemId=1500009375 总是返回当前任务而不是其他任务的问题

# 日期：3/17
## 管理后台-用户参与列表,添加一个搜索“来源”，模糊查询origin对应任务的参与记录

# 后端需求-付顺
[toc]

---
#日期：3/16-3/18
## 首页红包功能修改：
![](http://q6c90g50a.bkt.clouddn.com/picgo/20200316170733.png)
### 1.流程：
![此处输入图片的描述][1]

### 2.名词说明
|名词|说明|
|--|--|
|翻倍|在原定数量上 *2 |
|游戏奖励|指获得point_wall_line_info表中trade_type in (3020,3024,3037)的奖励|
|审核通过|有两个位置可以操作任务审核通过：<br>1.在管理后台-用户参与列表，审核通过<br>2.在任务渠道后台-审核任务，审核通过|

### 3.关于rtype= 03分配指定任务赚的要求：
 <div style="width:70%">![](http://q6c90g50a.bkt.clouddn.com/picgo/20200316172328.png)</div>

### 4.rtype=03时的页面弹窗：
![](http://q6c90g50a.bkt.clouddn.com/picgo/20200316174150.png)

### 5.添加系统参数配置指定任务id列表

### 6.红包奖励需要生成 2 条金币明细记录：
1. 按原本配置的数量奖励的记录，备注：首页拆红包奖励
2. 翻倍奖励，备注：首页拆红包翻倍奖励

## 首页-领取任务佣金 功能修改：
### 1.去掉推荐的 3 个游戏，改为推荐 1 个任务赚：
![](http://q6c90g50a.bkt.clouddn.com/picgo/20200316180657.png)

### 2.推荐的任务赚选取的要求：
    1. app_task_info表中的任务
    2. 状态为 已上架
    3. 按hard_level从小到大排序，优先取小的
    4. 同个hard_level时，随机取一个

### 3.后端需要返回的参数
    1. 任务id
    2. 任务标题
    3. 任务图片
    4. 任务奖励金额
    5. 任务已赚人数

## 任务赚添加本金字段
### 1.数据库添加记录本金的字段
### 2.当任务被审核通过时，若本金不为 0 ，返还本金到用户的金额账户（sys_user.free_money）
并生成一条本金到账的资金明细记录（fn_io_record表）：备注：完成任务【<span style="color:red">此处填入任务标题</span>】返还本金

### 3.管理后台-任务管理系统-新建/编辑任务，添加本金参数上传（数字输入框）

## 新页面：管理后台-数据统计-任务赚数据
### 1.页面原型：
![](http://q6c90g50a.bkt.clouddn.com/picgo/20200316182630.png)

### 2.页面元素解释：
|页面元素|说明|
|--|--|
|导出按钮|导出当前查询结果所有字段|
|领取人数|统计该日期领取了任务的人数，即user_attend_task_line表中，createOn同一天内有记录的人数|
|提交人数|统计该日期提交了任务的人数，即user_attend_task_line表中，submitOn同一天内有记录的人数|
|完成人数|统计该日期完成了任务的人数，即user_attend_task_line表中，auditOn同一天内status= 05的人数|
|支出（元）|统计该日期任务的支出金额，即user_attend_task_line表中，auditOn同一天内status= 05的记录coin总和 除以 {{金币与现金的兑换比例}}|
|收入（元）|统计该日期任务的支出金额，即user_attend_task_line表中，auditOn同一天内status= 05的记录seller_pay_price总和 除以 {{金币与现金的兑换比例}}|
|利润（元）|收入 - 支出|



# 日期：3/13-3/16
## 签到功能添加完成条件选择

### 1. 签到功能添加参数：
* 签到类型：针对 7 天签到分开配置
1. 直接签到：点击按钮直接签到
2. 任务签到：跳转指定任务清单，完成后即签到成功

* 指定任务清单id

### 2.需要在以下 3 个接口添加返回上述 两个参数
    1. /m/home-center/v2
    2. /my/coin/withdraw-config
    3. /m/check-in-page

## 关于任务赚引导分享的功能添加
### 1.首页添加接口告知安卓是否弹出“任务赚通知”

|返回参数|说明|
|--|--|
|是否弹出|0：用户上一次登录日期之后，有被审核通过的任务，需要弹窗；<br>1：用户上一次登录日期之后，无被审核通过的任务，不需要弹窗|
|任务logo|选取用户上一次登录日期之后，被审核通过的任务中权重最大的一个|
|任务标题|选取用户上一次登录日期之后，被审核通过的任务中权重最大的一个|

### 2.任务赚详情页，我的任务赚修改：
* 添加返回参数“可再赚n元”：
> 计算方式：后台配置的邀请用户首单任务赚奖励 + 每单任务赚分成 * 当前任务的金额<br><br>
如：后台配置的邀请用户首单任务赚奖励为 1.5 元，当前用户为普通用户，一级粉丝分成为 10%，任务金额为 5 元    ——>   1.5+10%*5=2元
（ps：团长，超级团长的分成比例各有不同）

* 需要添加这个参数的接口：
1. my/app-info/status?page=0&size=20&search=status:02,uid:999409
2. my/app-info/dl/146

## 任务赚推广页任务信息接口：
    根据任务id，查询任务赚任务信息（相关表格：app_task_info任务总表，user_attend_task_line用户参与记录表，wx_user_info微信信息表）
|需求一级参数||说明|
|--|-|--|
|分享者微信头像||wx_user_info.wxname|
|任务图片||app_task_info.logo|
|任务标题||app_task_info.title|
|任务价格||app_task_info.coin，需要除以兑换比例，以人民币单位的数值返回|
|推荐任务（需要返回权重最大的5个任务|图片||
||标题||
||价格||
||标签||
||已赚人数|统计已完成该任务的人数 + app_task_info表里的complete_user_num|

# 日期：3/12
## 管理后台-任务收益的接口添加一项统计：
> 签到：统计每天的签到支出（包括正常签到和倒计时签到领金币）

* 商家消耗：0
* 用户获得：当天所有签到支出（单位：元）（数据库记录单位为金币，金币：金额 = 100:1）
* 平台收益：商家消耗-用户获得

## 关于金币和金额的兑换比例
> 之前system_config中有一个参数是表示这个兑换比例的，以后涉及到这个参数的程序都去使用这个系统参数，如上面统计签到支出这个地方<br><br>**目的：** 以后有需要修改兑换比例时，可以直接通过修改系统参数改变。之前的程序之后再慢慢改回来

## 管理后台-任务收益的接口，修改享玩的数据返回错，返回了多游的数据的问题

# 免费抽奖功能添加权重字段控制奖品列表接口返回数据的排序

# 游戏赚-速赚的搜索上接口增加搜索享玩的功能
* 对接文档：https://www.showdoc.cc/pceggswall?page_id=2697250535693342
密码：123456


  [1]: http://q6c90g50a.bkt.clouddn.com/picgo/%E7%BA%A2%E5%8C%85%E5%8A%9F%E8%83%BD%E6%B5%81%E7%A8%8B3-16.png