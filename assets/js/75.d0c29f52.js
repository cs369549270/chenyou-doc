(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{308:function(t,e,a){"use strict";a.r(e);var i=a(28),l=Object(i.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"手动取消任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动取消任务"}},[t._v("#")]),t._v(" 手动取消任务")]),t._v(" "),a("p",[a("strong",[t._v("需求类型：")])]),t._v(" "),a("ul",[a("li",[t._v("梳理")])]),t._v(" "),a("p",[a("strong",[t._v("流程：")])]),t._v(" "),a("div",{staticClass:"mxgraph",staticStyle:{"max-width":"100%",border:"1px solid transparent"},attrs:{"data-mxgraph":'{"highlight":"#0000ff","nav":true,"resize":true,"toolbar":"zoom layers lightbox","edit":"_blank","xml":"<mxfile host=\\"Electron\\" modified=\\"2020-05-08T03:44:28.177Z\\" agent=\\"5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.0.1 Chrome/80.0.3987.163 Electron/8.2.1 Safari/537.36\\" etag=\\"UWjNwV6vet-eNB0VlwDx\\" version=\\"13.0.1\\" type=\\"device\\"><diagram id=\\"4Ohi7SmVh0KrXJ_06E7v\\" name=\\"Page-1\\">7VtLc5s6FP4td6HJKh0kXmIJttO76J1pJ4vbLBUj23TA8mA5tvPrK4EwVsAxblKE28xkxtKRBOKc853v6BFgj7Ld55ysFv+xmKYAWfEO2GOAEII+Ej9Ssi8l0INKMs+TuJRZteA+eaaqYyXdJDFdK1kp4oylPFnpwilbLumUazKS52yrd5uxNNYEKzKnDcH9lKRN6f9JzBelFCO/lv9Lk/miejP0grIlI1Vn9SXrBYnZ9khkT4A9yhnjZSnbjWgqtafr5e5E62FiOV3yTgNGt9FzOlutvmVP2Y+IhOPdt1tHzY3vqw+msfh+VWU5X7A5W5J0UkujnG2WMZVPtUSt7vOFsZUQQiH8QTnfK2OSDWdCtOBZqlrLd8oXnfwUJVqzTT6lr8y/cgmSzyl/pZ99ULhwVcoyyvO9GJfTlPDkSZ8HUS4zP/SrtSoKSrEXKFk994mkG/UmMPEADgCOwMQFOAQhLgp3IPBkUyRahcQBUST/VB/YtFWaChxIm2wXCaf3K1Ioayuw2KbxJ5pzuntd500dVVj2yhEKyEh5zrYGBaw8fXEECGz9JqX6TaUij2Tyw5ePa/lTOOhLmQF3FwrO99/V+KLyICuf3Ko63h03jveq9o4wQR1h4pmECcLXZB26S/j3uqeoPVRPFOV6kKwYtOgpVPdk0uAsSv/pDNMv5FFkF5rxSJrMl6I8FfqjuRDIEJcI9g5VQ5bEcekndJ08k8fiedIUK5YsefG5bgTc8WsxUqUWanBN6JrZTjv0yYh6a33CPlRO39ke6nFf5fzrcPxiAJvN1sItXprvMIc3WLSFyxo8NfFlISq4TBAAbjJXvmDZ42bdC3M5ln+WuhyvR+pyrynOvWPMsrvGLJMhy25x8F9IzXR79ZCeVYFEObndMT/zfpeTn4/8h/qcFzXrI1s7ysI64OQEvfRE7VcVxQxna10tajhb67Cmquopv2SFdX2pm3s2dUOWHnHhdSVy3imeC+/AJAAhAtjTmC9wQWTJJuxLocmMzkNoWBldtal5CXI+CE8nsg7hEVrtbtFTeLQuTGkGZt7aog+aQYdj3sCkeXF7QBShMCjy/TEIgiIO+sXKNigKzf3zPuMgtge2soUtq6fmrqzocGPBm7802FUnW+fhYDQZhG5nU6Kbj0B3oWkdo6ZtITKV6UFZiDDAdhHqxiB0i12PEARWw6h9hjpouXBgsa6FMFoBMrA0wFzg63pYC32jaR4yYR8Teja823A+V/iTz4ZObHLXGwwQB44W8VTtjRsMt73tMFR+qNEMBpGgmUgWQgjwqEitRXk8sC0GiDx3YHzj/a284XTljbfGs2JomOdkf9RBRYMmoA6e4uq7UQK4x8Y+P8BzXjhHOYX3BaPTAsagOJ21JPTCEYgmTcT1fIoFLU+PedANmrDr9RwLGbkid4AdvAx2hs85oH8VqQdsOeiQPHQHwknBQ6IcdLrXULKXWB6h6pKBSfQ4KvIM5hDYbi4aB8xZpsETXAd4Wk723wwe8xcosGvpzOMh08zTzJ/pMm4CquslYLJelTfkZ8lOKvZ90uRAPwVFuKk23KK1X0iTRbW+LV/mRfU/HdiTnw==</diagram></mxfile>"}'}}),t._v(" "),a("script",{attrs:{type:"text/javascript",src:"https://app.diagrams.net/js/viewer.min.js"}}),t._v(" "),a("p",[a("strong",[t._v("请求URL：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("/my/app-info/quit/319")])])]),t._v(" "),a("p",[a("strong",[t._v("请求参数：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("userid")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("用户标识")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("appid")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("任务标识")])])])]),t._v(" "),a("p",[a("strong",[t._v("流程说明：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("流程")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("操作说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("取消任务")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 根据appid，uid 查询 user_attend_app_line 表中 status = '01' 的记录，修改status 为 '03'"),a("br"),t._v("2. 根据appid，uid 查询 user_attend_task_line 表中 status = '01' 的记录，修改status 为 '06'")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("任务状态")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 查询 app_task_info 表中的 status")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("可领取数量")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 根据appid 查询 app_task_plan 表中的 start_time <= now() 的 release_num 总和  → 已投放份数"),a("br"),t._v(" 2. 根据appid 查询user_attend_app_line表中status = '01' 的任务记录数  → 进行中份数 "),a("br"),t._v(" 3. 已投放份数 - 进行中份数  → 可领取数量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("剩余时间")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 根据appid 查询 app_task_info 表中的downdt → 截止时间 "),a("br"),t._v(" 2. 截止时间 - now() → 剩余时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("发布来源")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 查询 app_task_info 表中的ori_type ： 01 表示 运营发布 ； 02 表示 渠道发布")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("退款")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("strong",[t._v("1. 根据 appid 查询 app_task_info 中的渠道标识 ruid ,title,seller_pay_price")]),a("br"),t._v(" "),a("br"),a("strong",[t._v("2. 在 fn_io_record 中添加渠道的退款记录:")]),a("br"),t._v("    comment = '任务【 "),a("code",[t._v("title")]),t._v(" 】用户放弃提交，任务已过期，退款'，"),a("br"),t._v("    trade_type = '3069' ， "),a("br"),t._v("    money = "),a("code",[t._v("seller_pay_price")]),t._v("/100"),a("br"),a("br"),a("strong",[t._v("3. 增加渠道的余额（sys_user 中的 free_money) + "),a("code",[t._v("seller_pay_price")]),t._v("/100")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("进行中数量")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 查询user_attend_app_line表中status = '01' 的任务记录数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("修改任务状态 为 1")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 修改 app_task_info 表中的status 为 1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("修改任务状态 为 7")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 修改 app_task_info 表中的status 为 7")])])])])])}),[],!1,null,null,null);e.default=l.exports}}]);