(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{309:function(t,e,a){"use strict";a.r(e);var i=a(28),l=Object(i.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"任务加价"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务加价"}},[t._v("#")]),t._v(" 任务加价")]),t._v(" "),a("p",[a("strong",[t._v("需求类型：")])]),t._v(" "),a("ul",[a("li",[t._v("优化")])]),t._v(" "),a("p",[a("strong",[t._v("流程：")])]),t._v(" "),a("div",{staticClass:"mxgraph",staticStyle:{"max-width":"100%",border:"1px solid transparent"},attrs:{"data-mxgraph":'{"highlight":"#0000ff","nav":true,"resize":true,"toolbar":"zoom layers lightbox","edit":"_blank","xml":"<mxfile host=\\"Electron\\" modified=\\"2020-05-09T07:47:45.921Z\\" agent=\\"5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.0.3 Chrome/80.0.3987.163 Electron/8.2.1 Safari/537.36\\" etag=\\"bpzFp_BJP5lXOFpZlrxz\\" version=\\"13.0.3\\" type=\\"device\\"><diagram id=\\"FYPVUWWAyWi8Iw9-dcur\\" name=\\"Page-1\\">5Vldb9owFP0te/BjUb7jPBJIt4dWq1RNW/dmiEtSJRgFU6C/fteJTTABmoIC6yZV1D6OjX3vPcf3BmQP8tXXgsySexbTDFlGvEL2EFmW7wTwKYB1BbiuVwGTIo0ryKiBx/SNVqCp0EUa07nEKogzlvF0poNjNp3SMdcwUhRsqT/2zLJYA2ZkQhvA45hkTfRnGvOkQrHl1/g3mk4S9c2mJw+cE/WwPMk8ITFbbkF2hOxBwRivWvlqQDNhO90utwdGNxsr6JS3mWDj9Zy93ON8Gv+2QvL9x0OW3MhV5nytDkxjOL/ssoInbMKmJItqNCzYYhpTsaoBvfqZO8ZmAJoAvlDO19KZZMEZQAnPMzkKGy7Wv+T8svMkOj1XdYer7cHhWvaqvYoNHjSBOg9bFGN65NyWDCVSTCg/8py7cRQEOGU5hf3AvIJmhKev+j6IDLXJ5rnN1AeWwg4tQ7LCMnE1RZLCc/QVqm3JSbVLobG1ixoqHf0Bp8vDv5JsIU+AIgeFofiLXIT7qG+qhqGG/GakZBmwUETEMkk5fZyR0uRL0AHd3/LraMHp6rjnmpZWFvM0g1nSYMuakqbiWbJFR2wcdo1m1Y+a0L4Kb1Yp/1UzBXpPWyM1aURHcabmWk2vJ41dnXPNbck180AInEu2wNFix8TeRdnmNNlmeSQXHJmO5uJfiRoQqgYr4GMP08ANd2QEN6sWDyRLJ1Noj8EltABAUCyFu6svB/I0jqvQo/P0jYzK9YR3Z+Kw5fHdELnDYxyVF6ucXF9n25FwmCIHCX1j9LCvZPBUD2882nOwPok9P89pJ+50W4mnLxqhhyIPgQbh5jVbJCwfLeaXEU815Yh6Ot4F1dPbQ4nLy2l7iXtXuoJOlMt1/aNpQqW8nQmXSsGPKNeXEt5RM8vLwFbhCLTMm4jWO8r272ebrW/AbtJN2zspjhrrOPbxdTq+SE2zEY+OAcwz9mevkLGGoM0Y9S3Uh6FANODuF8/coqBs9COEByi6ReGgbGxmwYIY4VDodxAJIW/otxaWF9BwezeLaZkCe12JuLmnjGhKQdUvZaDSih1tKG9IcI0tGv0BCiPhKeyjwJQuC4b/qWqYrWXDP1M2zouD69RCJ9Y1p9RQ1/Dp1iuia/i0RdGi+iWhSxU+kcmfrrIx3y1tfGxYmlyrdy7n1rL6HeD3fEtforu6xzxQ+AxREBz27yXLHGfnirx6maPc9WnqnPfly28rX+e+yzlPvvw9sdpQp2undJ5raPFqXzujs5oJdovXwJc2G3b+NrM16+StukTXR1lYDEVdAlVF2MydLm1Ox9GLOlO9rOrAntCtf++qLqb6R0M7+gM=</diagram></mxfile>"}'}}),t._v(" "),a("script",{attrs:{type:"text/javascript",src:"https://app.diagrams.net/js/viewer.min.js"}}),t._v(" "),a("p",[a("strong",[t._v("请求URL：")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("/my/seller-app-task/charrenOperation")])])]),t._v(" "),a("p",[a("strong",[t._v("请求参数：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("id")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v('操作标识，加量传"jj"')])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("taskid")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("任务标识")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("price")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("每份添加的价格，单位：元")])])])]),t._v(" "),a("p",[a("strong",[t._v("流程说明：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("流程")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("操作说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("任务状态")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 查询 app_task_info 表中的 status")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("409 任务已被领取完，已下架")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("状态码返回409，提示：“任务已被领取完，已下架”")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("余额")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据 uid 查询 sys_user 表中的free_money")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("扣款金额")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 根据taskid 作为id 查询app_task_info 表中的release_num → 总份数 "),a("br"),t._v(" 2. 根据taskid 作为appid 查询 user_attend_task_line 表中 status !='06' 的记录数 → 已领取数量"),a("br"),t._v("3. 前端传的price * （总份数 - 已领取数量） → 扣款金额")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("409 余额不足")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("状态码返回409，提示：“余额不足”")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("扣款")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("strong",[t._v("1. 新增用户资金明细记录:")]),a("br"),t._v("    money_type 为 2，"),a("br"),t._v("    money 为 扣款金额，"),a("br"),t._v("    comment修改为：“任务【"),a("code",[t._v("app_task_info.title")]),t._v("】加价”，"),a("br"),t._v("    reference_id 为 前端传的taskid，"),a("br"),t._v("    free_money 为 扣款后的新余额，"),a("br"),t._v("    trade_type 为 3067"),a("br"),a("br"),t._v("** 2. 更新用户扣款后的余额**")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("加价")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 根据用户uid查询apptask_channel_user 表中的task_rate → 放佣比例"),a("br"),t._v("2. 根据taskid 作为 id 查询更新app_task_info.seller_pay_price 为 （原数值 + 前端传的 price"),a("em",[t._v("100）,coin 为 （更新后的seller_pay_price * 放佣比例task_rate）向上取整"),a("br"),t._v("3. 根据taskid 作为 appid 查询更新little_app_task_info.seller_pay_price 为 （原数值 + 前端传的 price")]),t._v("100）,coin 为 （更新后的seller_pay_price * 放佣比例task_rate）向上取整")])])])])])}),[],!1,null,null,null);e.default=l.exports}}]);