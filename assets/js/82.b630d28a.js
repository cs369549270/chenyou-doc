(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{311:function(t,e,l){"use strict";l.r(e);var a=l(28),i=Object(a.a)({},(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[l("h1",{attrs:{id:"任务加量"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#任务加量"}},[t._v("#")]),t._v(" 任务加量")]),t._v(" "),l("p",[l("strong",[t._v("需求类型：")])]),t._v(" "),l("ul",[l("li",[t._v("优化")])]),t._v(" "),l("p",[l("strong",[t._v("流程：")])]),t._v(" "),l("div",{staticClass:"mxgraph",staticStyle:{"max-width":"100%",border:"1px solid transparent"},attrs:{"data-mxgraph":'{"highlight":"#0000ff","nav":true,"resize":true,"toolbar":"zoom layers lightbox","edit":"_blank","xml":"<mxfile host=\\"Electron\\" modified=\\"2020-05-09T06:55:09.172Z\\" agent=\\"5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.0.3 Chrome/80.0.3987.163 Electron/8.2.1 Safari/537.36\\" etag=\\"dpcm1B9NiK-fDUtaR2Z1\\" version=\\"13.0.3\\" type=\\"device\\"><diagram id=\\"TDIFKkF5dcnUugnZ5NQM\\" name=\\"Page-1\\">5Vldj9o4FP01fuwoTojjPBLIbHfbaiuNtNvZN0NM4ipgGkyB/vq1E5vgGpjMMISdrTTS2Mcf2Peec33tgGA03/5WkWXxiWe0BL6XbUEwBr4PPYzkP4XsGgR7GsgrljWQ1wIP7Ac1IzW6ZhldaayBBOelYEsbnPLFgk6FhZGq4hu724yXmQUsSU4d4GFKShf9m2Wi0LvwoxZ/T1lemF+GKG5a5sR01jtZFSTjmwMoSEEwqjgXTWm+HdFSGc+2y/2J1v3CKroQXQZ8mH2L2T9/pekf7E86/v2z+JS/f6dnWYmd2TDN5P51lVei4DlfkDJt0aTi60VG1ayerLV9PnK+lCCU4FcqxE47k6wFl1Ah5qVulQuudl/0+LryqCp3oamOt4eN452uNWtVCzxpArMfvq6m9My+fU0lUuVUnOkX7h0lGU75nMr1yHEVLYlg3+11EE21fN9vP/QzZ3KFvqdl4UPcDNGiQAN7hmZZelDrUlk4WEUL1Y5+htP15r+Tcq13ANIBSBL1l4YAD8EQmoIH0hjgCOB7lyllKVWoGLEpmKAPS1KbfCMDge1v/XO0EnR73nOupY3FkGUwXxts00oSGp0VB3LE3mnXWFZ9rgmDm+hmy8SXVimy9njQ0opGVYxmWq218nq01HV1rYUdtYavo7V4YFEHmhOpJ7ENXLH5iMyVRBaT1bI2ta6Xoq5JySGAYzAMVGE4AkmqRRhDVRj6IB67kxzh40cykcexxSFSsnwhy1PpRlpJQMmSyfNuqBvmLMsautIV+0Em9XyKEUtlodpmYQLC8Tld68NYD26PwEP2nJbVySDwzrvDkQmdL6XFngZ3A2wP4rPZil6FA+HxgDsGcXzg0J8cWBV8Plmv+gmvZsiZ+DpAPcZXk/5Zsuk/4r5iFEQdo2B8YRS8yOzoCFGdWOQQ1bLy9ck6CCKLrEHHZABdjaxvnZtxR27CE47ph5zxEXI+maT2TU7k/8fIGXXPP/I6/1B95GJQnY1MKllq8E5JyS95meya4KIL1XM8wQ2QzbifL5PN8p381pkHmSP2NpdS7PB04MV1MuxkSgrBAMsCBgkCiXsZ61v1e5nvs8tbyx52uHfUSvc63ST+/yKG5nXxyUPwxCWln0MQRm/JPy95sbiJTy9957vMp27sc0SZ3oNkBDB8jmjf3PW/Ife5+3+EPfuUMo+ZLz1Er3/5NyR84rk1UgV5mqk0y1OOvuV7AIZ2TnH79wB0i7D3mqEoeBuhKDhC1hAkkpGoE2tVn3swTBUSy3Kss7VkKGc9QuqeEzXoBYHF7Jvfz6D7OEgXmcv2rh9byGrZfAedsa0y7OtYLbStBiPXbPh1vr/IavtNtInB7ZflIP0X</diagram></mxfile>"}'}}),t._v(" "),l("script",{attrs:{type:"text/javascript",src:"https://app.diagrams.net/js/viewer.min.js"}}),t._v(" "),l("p",[l("strong",[t._v("请求URL：")])]),t._v(" "),l("ul",[l("li",[l("code",[t._v("/my/seller-app-task/charrenOperation")])])]),t._v(" "),l("p",[l("strong",[t._v("请求参数：")])]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("id")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v('操作标识，加量传"jl"')])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("taskid")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("任务标识")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("number")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("添加的份数")])])])]),t._v(" "),l("p",[l("strong",[t._v("流程说明：")])]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}},[t._v("流程")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("操作说明")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("余额")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("根据 uid 查询 sys_user 表中的free_money")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("扣款金额")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("1. 根据taskid 作为id 查询app_task_info 表中的seller_pay_price "),l("br"),t._v(" 2. 前端传的number * seller_pay_price/100 → 扣款金额")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("409 余额不足")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("状态码返回409，提示：“余额不足”")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("扣款")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("strong",[t._v("1. 新增用户资金明细记录:")]),l("br"),t._v("    money_type 为 2，"),l("br"),t._v("    money 为 "),l("code",[t._v("前端传的number * seller_pay_price/100")]),t._v("，"),l("br"),t._v("    comment修改为：“任务【"),l("code",[t._v("app_task_info.title")]),t._v("】加量”，"),l("br"),t._v("    reference_id 为 前端传的taskid，"),l("br"),t._v("    free_money 为 扣款后的新余额，"),l("br"),t._v("    trade_type 为 3066"),l("br"),l("br"),t._v("** 2. 更新用户扣款后的余额**")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("加量")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("1. 更新app_task_info.release_num 为 （原数值 + 前端传的 number）"),l("br"),t._v("2. 根据taskid作为 appid 在app_task_plan 表中新增记录，createOn 为当前时间，release_num 为前端传的number")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("任务状态")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 查询 app_task_info 表中的 status")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("修改任务状态为 1")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("根据appid 修改 app_task_info 表中的status 为 1")])])])])])}),[],!1,null,null,null);e.default=i.exports}}]);